<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carrito de Compras | History Keepers</title>
  <meta name="description" content="Revisa y gestiona los productos que has agregado a tu carrito de compras.">
  <link rel="icon" href="/assets/logo.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/carrito/carrito.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
</head>
<body>
<header class="topbar">
    <div class="container wrap">
      <div class="header-left">
        <a href="/carrito/carrito.html" class="cart-icon" aria-label="Carrito">
          <img src="/assets/briefcase-icon.png" alt="Carrito" />
        </a>
      </div>

      <a href="/index.html" class="header-center">
        <span class="logo logo-text">HISTORY KEEPERS</span>
      </a>

      <div class="header-right actions">
        <button class="top-btn" data-open="login">LOGIN</button>
        <button class="top-btn" data-open="register">REGISTRARSE</button>
      </div>
    </div>
  </header>

  <main class="container">
    <nav class="small breadcrumb">
      <a href="#" id="go-back" class="small back-link">‚Üê Regresar</a>
    </nav>

    <section class="cart-page" style="padding:20px 0 50px;">
      <h2>Tu Carrito de Compras</h2>

      <div id="cart-empty" class="card" style="margin-top:20px;" hidden>
        <p>Tu carrito est√° vac√≠o.</p>
        <p style="margin-top:15px;"><a href="/comprador/comprador.html" class="btn">‚Üê Continuar comprando</a></p>
      </div>

      <div class="cart-layout">
        <div id="cart-items-container" class="cart-items"></div>

        <div id="cart-summary" class="cart-summary">
          <div class="card" style="position: sticky; top: 90px;">
            <h3 id="summary-title">Resumen del Pedido</h3>

            <div id="step-summary" class="checkout-step">
              <div class="summary-row">
                <span>Subtotal <span id="summary-count">(0 art√≠culos)</span></span>
                <strong id="summary-subtotal">$0</strong>
              </div>
              <div class="summary-row">
                <span>Env√≠o (Est√°ndar)</span>
                <strong id="summary-shipping">$150</strong>
              </div>
              <div class="summary-total">
                <span>Total</span>
                <span id="summary-total">$150</span>
              </div>
              <button id="btn-to-address" class="btn btn-primary" style="width:100%; margin-top:30px;">
                Continuar a Direcci√≥n
              </button>
            </div>

            <div id="step-address" class="checkout-step" hidden>
              <form id="address-form" class="checkout-form" novalidate>
                <div id="saved-addresses-wrapper" style="margin-bottom: 15px;" hidden>
                  <label for="saved-address-select" style="color: var(--accent);">Usar una direcci√≥n guardada</label>
                  <select id="saved-address-select" class="input">
                    <option value="">-- Seleccionar direcci√≥n --</option>
                  </select>
                  <hr style="border: 0; border-top: 1px solid var(--border); margin: 15px 0;">
                </div>

                <label for="addr-calle">Direcci√≥n de Env√≠o</label>
                <input id="addr-calle" name="calle" class="input" type="text" placeholder="Calle y N√∫mero" required>

                <label for="addr-colonia">Colonia</label>
                <input id="addr-colonia" name="colonia" class="input" type="text" placeholder="Colonia / Municipio" required>
                
                <input type="hidden" name="alias" value="Nueva Direcci√≥n">

                <div class="form-grid">
                  <div>
                    <label for="addr-ciudad">Ciudad</label>
                    <input id="addr-ciudad" name="ciudad" class="input" type="text" placeholder="Ciudad" required>
                  </div>
                  <div>
                    <label for="addr-cp">C.P.</label>
                    <input id="addr-cp" name="cp" class="input" type="text" placeholder="C.P." maxlength="5" inputmode="numeric" required>
                  </div>
                </div>
                
                <div id="save-address-div" style="margin-top: 10px; display: flex; align-items: center; gap: 8px;">
                  <input type="checkbox" id="save-address-check" style="width: 16px; height: 16px;">
                  <label for="save-address-check" style="margin:0; font-weight: 400; font-size: 0.9rem;">Guardar esta direcci√≥n en mi cuenta</label>
                </div>

                <button id="btn-to-payment" type="button" class="btn btn-primary" style="width:100%; margin-top:20px;">
                  Continuar a Pago
                </button>
              </form>
            </div>

            <div id="step-payment" class="checkout-step" hidden>
              <form id="payment-form" class="checkout-form" novalidate>
                <div id="saved-payments-wrapper" style="margin-bottom: 15px;" hidden>
                  <label for="saved-payment-select" style="color: var(--accent);">üí≥ Usar una tarjeta guardada</label>
                  <select id="saved-payment-select" class="input">
                    <option value="">-- Seleccionar tarjeta --</option>
                  </select>
                  <hr style="border: 0; border-top: 1px solid var(--border); margin: 15px 0;">
                </div>

                <label for="pay-nombre">Nombre en la tarjeta</label>
                <input id="pay-nombre" class="input" type="text" placeholder="Como aparece en la tarjeta" required>

                <label for="pay-tarjeta">N√∫mero de tarjeta</label>
                <input id="pay-tarjeta" class="input" type="text" placeholder="#### #### #### ####" maxlength="19" inputmode="numeric" required>

                <div class="form-grid">
                  <div>
                    <label for="pay-exp">Vencimiento (MM/AA)</label>
                    <input id="pay-exp" class="input" type="text" placeholder="MM/AA" maxlength="5" required>
                  </div>
                  <div>
                    <label for="pay-cvv">CVV</label>
                    <input id="pay-cvv" class="input" type="text" placeholder="CVV" maxlength="4" inputmode="numeric" required>
                  </div>
                </div>

                <div id="save-payment-div" style="margin-top: 10px; display: flex; align-items: center; gap: 8px;">
                  <input type="checkbox" id="save-payment-check" style="width: 16px; height: 16px;">
                  <label for="save-payment-check" style="margin:0; font-weight: 400; font-size: 0.9rem;">Guardar tarjeta para futuras compras</label>
                </div>

                <button id="btn-pay" type="button" class="btn btn-primary" style="width:100%; margin-top:20px;">
                  Pagar ahora
                </button>
              </form>
            </div>

            <div id="step-confirmation" class="checkout-step" hidden>
              <p>¬°Gracias por tu compra! Te enviaremos un correo con los detalles.</p>
              <p style="margin-top:15px;">
                <a href="/comprador/comprador.html" class="btn btn-primary">Volver al inicio</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container small">¬© <span id="y"></span> History Keepers</div>
  </footer>

  <dialog id="dlg-register" class="modal">
    <form method="dialog" id="register-form" class="modal-card-body">
      <div class="modal-logo logo-text">HK</div>
      <h2>CREAR CUENTA</h2>
      <p class="modal-subtitle">Reg√≠strate para finalizar tu compra.</p>

      <input class="input" type="text" id="reg-nombre" name="nombre" placeholder="NOMBRE COMPLETO" required />
      <input class="input" type="email" id="reg-email" name="email" placeholder="EMAIL" required />
      <input class="input" type="password" id="reg-password" name="password" placeholder="CONTRASE√ëA" required />

      <button type="submit" class="btn btn-primary">REGISTRARSE</button>
      <p class="modal-link">¬øYa tienes cuenta? <a href="#" data-switch="login">INICIA SESI√ìN</a></p>
    </form>
  </dialog>

  <dialog id="dlg-login" class="modal">
    <form method="dialog" id="login-form" class="modal-card-body">
      <div class="modal-logo logo-text">HK</div>
      <h2>BIENVENIDO</h2>
      <p class="modal-subtitle">Inicia sesi√≥n para continuar.</p>

      <input class="input" type="email" id="log-email" name="email" placeholder="EMAIL" required />
      <input class="input" type="password" id="log-password" name="password" placeholder="CONTRASE√ëA" required />

      <button type="button" id="btn-login-submit" class="btn btn-primary">ENTRAR</button>

      <p class="modal-link">¬øNuevo aqu√≠? <a href="#" data-switch="register">CREAR CUENTA</a></p>
    </form>
  </dialog>

  <div id="toast-notification" class="toast"></div>

  <script>document.getElementById('y').textContent = new Date().getFullYear();</script>
  <script src="/carrito/carrito.js"></script>
</body>
</html>